(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{63:(e,s,t)=>{"use strict";var r=t(7260);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},7432:(e,s,t)=>{Promise.resolve().then(t.bind(t,9547))},9547:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(5155),n=t(2115),a=t(63);function l(){let e=(0,a.useRouter)(),s=(0,a.useSearchParams)(),[t,l]=(0,n.useState)(!1),[u,c]=(0,n.useState)(!1),i=(0,n.useRef)(!1);(0,n.useEffect)(()=>{let e=null==s?void 0:s.get("authaction");if(e&&!t){l(!0),console.log("[OpenNDS] Redirecting to auth URL:",e),window.location.href=e;return}},[s,t]);let o=(0,n.useCallback)(async()=>{c(!0),console.log("[UI][enqueue] POST /api/queue/enqueue ...");try{let s=await fetch("/api/queue/enqueue",{method:"POST"});if(s.ok){let{ticketId:t,reused:r}=await s.json();console.log("[UI][enqueue] success",{ticketId:t,reused:r}),console.log("[UI][enqueue] navigate /queue?ticketId=".concat(t)),e.push("/queue?ticketId=".concat(t))}else console.error("[UI][enqueue] error status=",s.status),console.error("Erreur lors de l'entr\xe9e dans la file"),alert("Erreur lors de l'entr\xe9e dans la file. Veuillez r\xe9essayer.")}catch(e){console.error("[UI][enqueue] network error:",e),alert("Erreur de connexion. Veuillez r\xe9essayer.")}finally{c(!1)}},[e]);return((0,n.useEffect)(()=>{(null==s?void 0:s.get("auto"))&&!i.current&&!u&&(i.current=!0,o())},[s,u,o]),t)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-8",children:(0,r.jsx)("div",{className:"text-xl text-gray-600",children:"Connexion au r\xe9seau WiFi en cours..."})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Tests Techno 130 ans EMF"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Bienvenue dans le syst\xe8me de questions techniques pour c\xe9l\xe9brer les 130 ans de l'\xc9cole des M\xe9tiers de Fribourg."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-8",children:"Le syst\xe8me garantit l'acc\xe8s exclusif aux questions - une seule personne \xe0 la fois peut participer."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("button",{onClick:o,disabled:u,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-lg font-medium",children:u?"Entr\xe9e en cours...":"Entrer dans la file d'attente"}),(0,r.jsx)("div",{className:"text-xs text-gray-400 text-center",children:"Version TEST - Questions via JSON local, simulation d'affichage uniquement"})]})]})})}function u(){return(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-8",children:(0,r.jsx)("div",{className:"text-xl text-gray-600",children:"Chargementâ€¦"})}),children:(0,r.jsx)(l,{})})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=7432)),_N_E=e.O()}]);
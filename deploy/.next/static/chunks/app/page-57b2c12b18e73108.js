(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{63:(e,s,t)=>{"use strict";var r=t(7260);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},7110:(e,s,t)=>{Promise.resolve().then(t.bind(t,8424))},8424:(e,s,t)=>{"use strict";t.d(s,{default:()=>n});var r=t(5155),a=t(2115),u=t(63);function n(){let e=(0,u.useRouter)(),s=(0,u.useSearchParams)(),[t,n]=(0,a.useState)(!1),l=(0,a.useRef)(!1),c=(0,a.useCallback)(async()=>{n(!0),console.log("[UI][enqueue] POST /api/queue/enqueue ...");try{let s=await fetch("/api/queue/enqueue",{method:"POST"});if(s.ok){let{ticketId:t,reused:r}=await s.json();console.log("[UI][enqueue] success",{ticketId:t,reused:r}),console.log("[UI][enqueue] navigate /queue?ticketId=".concat(t)),e.push("/queue?ticketId=".concat(t))}else console.error("[UI][enqueue] error status=",s.status),alert("Erreur lors de l'entr\xe9e dans la file. Veuillez r\xe9essayer.")}catch(e){console.error("[UI][enqueue] network error:",e),alert("Erreur de connexion. Veuillez r\xe9essayer.")}finally{n(!1)}},[e]);return(0,a.useEffect)(()=>{(null==s?void 0:s.get("auto"))&&!l.current&&!t&&(l.current=!0,c())},[s,t,c]),(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"max-w-md w-full",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Tests Techno 130 ans EMF"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Bienvenue dans le syst\xe8me de questions techniques pour c\xe9l\xe9brer les 130 ans de l'\xc9cole des M\xe9tiers de Fribourg."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-8",children:"Le syst\xe8me garantit l'acc\xe8s exclusif aux questions - une seule personne \xe0 la fois peut participer."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("button",{onClick:c,disabled:t,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-lg font-medium",children:t?"Entr\xe9e en cours...":"Entrer dans la file d'attente"}),(0,r.jsx)("div",{className:"text-xs text-gray-400 text-center",children:"Version TEST - Questions via JSON local, simulation d'affichage uniquement"})]})]})})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=7110)),_N_E=e.O()}]);
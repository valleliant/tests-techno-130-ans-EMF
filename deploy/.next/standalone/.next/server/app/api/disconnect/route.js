"use strict";(()=>{var e={};e.id=784,e.ids=[784],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7790:e=>{e.exports=require("assert")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},665:e=>{e.exports=require("dns")},7702:e=>{e.exports=require("events")},2048:e=>{e.exports=require("fs")},8216:e=>{e.exports=require("net")},9801:e=>{e.exports=require("os")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},4026:e=>{e.exports=require("string_decoder")},2452:e=>{e.exports=require("tls")},4175:e=>{e.exports=require("tty")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},6005:e=>{e.exports=require("node:crypto")},712:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>q,patchFetch:()=>N,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var o={};r.r(o),r.d(o,{POST:()=>u,runtime:()=>p});var s=r(9303),n=r(8716),i=r(670),a=r(7070),c=r(3061);let p="nodejs";async function u(e){(0,c.l)();let{clientip:t,clientmac:r,userId:o}=await e.json();if(console.log("[DISCONNECT-API] Request:",{userId:o,clientip:t,clientmac:r}),!t&&!r)return console.log("[DISCONNECT-API] No gateway identifier, nothing to disconnect"),a.NextResponse.json({success:!0,message:"No gateway identifier provided, nothing to disconnect"});let s=process.env.OPENNDS_GATEWAY||"192.168.1.1",n=`http://${s}/cgi-bin/disconnect.cgi`;console.log("[DISCONNECT-API] Calling gateway:",n);try{let e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clientip:t,clientmac:r}),signal:AbortSignal.timeout(5e3)}),o=null;try{o=await e.json()}catch{console.warn("[DISCONNECT-API] Gateway response is not valid JSON")}return console.log("[DISCONNECT-API] Gateway response:",o),a.NextResponse.json({success:!0,message:"Client disconnected from gateway",data:o})}catch(e){return console.error("[DISCONNECT-API] Error calling gateway:",e),a.NextResponse.json({success:!0,message:"Client disconnect attempted, but gateway error occurred"})}}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/disconnect/route",pathname:"/api/disconnect",filename:"route",bundlePath:"app/api/disconnect/route"},resolvedPagePath:"C:\\tests-techno-130-ans-EMF\\src\\app\\api\\disconnect\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:x}=d,q="/api/disconnect/route";function N(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[276,197,972,61],()=>r(712));module.exports=o})();